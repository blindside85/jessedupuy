---
import { Debug } from 'astro:components';
import HtmlHead from "@components/HtmlHead.astro";
import BaseHeader from "@components/BaseHeader.astro";
import Footer from "@components/Footer.astro";
import "@styles/core.css";


const { frontmatter } = Astro.props;
let title;
if (Astro.url.host.includes('localhost')) {
    title = `LOCAL: blog: ${frontmatter.title}`
} else {
    title = `blog: ${frontmatter.title}`;
}

---

<!doctype html>
<html lang="en">
    <head>
        <HtmlHead
            {title}
            desc={frontmatter.description}
        />
    </head>

    <body>
        <div class="wrapper">
            <BaseHeader title={frontmatter.title} />
            <main>
                <article>
                    <section class="post-hero">
                        <section class="post-info">
                            <Debug {Astro.url.host} />
                            <Debug {Astro.request.url} />
                            <h1>{frontmatter.title}</h1>
                            <time datetime={frontmatter.pubDate.toISOString()}>
                                {frontmatter.pubDate.toDateString()}
                            </time>
                            <section class="post-tags">
                                <ul>
                                    {
                                        frontmatter.tags.map((tag: string) => (
                                            <li class="tag">
                                                <a href={`/tags/${tag}`}>{tag}</a>
                                            </li>
                                        ))
                                    }
                                </ul>
                            </section>
                        </section>
                        {
                            frontmatter.image && (
                                <img
                                    src={frontmatter.image.url}
                                    alt={frontmatter.image.alt}
                                />
                            )
                        }
                    </section>

                    <section class="post-content">
                        <slot />
                    </section>

                </article>
            </main>
            <Footer />
        </div>
    </body>
</html>
